# 調査報告書作成プロジェクト設定

このプロジェクトは調査報告書作成に特化したテンプレートリポジトリです。
AI指示書システムを活用して、信頼性の高い調査報告書を効率的に作成します。

## AI指示書システムの使用

タスク開始時は`instructions/ai_instruction_kits/instructions/ja/system/ROOT_INSTRUCTION.md`を読み込んでください。

## プロジェクト設定

- **目的**: 調査報告書の作成支援
- **対象分野**: IT技術、法制度、ソフトウェアプロジェクト等
- **言語**: 日本語（英語版も対応可）
- **出力形式**: HTML, PDF, Markdown
- **チェックポイント管理**: 有効
- **チェックポイントスクリプト**: scripts/checkpoint.sh
- **ログファイル**: checkpoint.log

## 重要なパス

- AI指示書システム: `instructions/ai_instruction_kits/`
- 報告書テンプレート: `reports/templates/`
- 調査資料: `sources/`
- 出力先: `output/`
- チェックポイントスクリプト: `scripts/checkpoint.sh`
- プロジェクト固有の設定: このファイル（`instructions/PROJECT.md`）

## 環境セットアップ

### 自動セットアップ（推奨）

初回セットアップ時は以下のコマンドで全ての依存関係をインストール：

```bash
make setup
```

または、スクリプトを直接実行：

```bash
scripts/setup.sh
```

**`make setup` が実行する処理:**
- Git submodule（AI指示書システム）
- Pandoc（必須）
- Quarto（オプション）
- 日本語LaTeX環境（オプション）
  - TeX Live / MacTeX
  - 日本語フォント（Noto CJK）

### 最小限のセットアップ

Git submoduleのみ初期化する場合：

```bash
make init
```

### 必須ツール

- **Git** - バージョン管理
- **Pandoc** - ドキュメント変換エンジン
- **Make** - ビルド自動化

### 推奨ツール

- **Quarto** - 高度なドキュメント生成
- **日本語LaTeX環境** - 高品質な日本語PDF生成
- **GitHub CLI** - プロジェクト自動作成

## 報告書作成の基本方針

### 必須要素

1. **エグゼクティブサマリ**
   - 1-2ページで全体を要約
   - 主要な発見事項と推奨事項を明記

2. **参考文献一覧**
   - すべての引用元を記載
   - 信頼性の高い情報源を優先

### 品質基準

1. **事実の記述**
   - 必ず引用元情報を示す
   - 参考文献との相互参照を確保

2. **多角的視点**
   - 複数の見解を調査・検討
   - バランスの取れた分析

3. **明確な区別**
   - 事実と考察を明確に区別
   - 推測や意見は明示的に表記

4. **信頼性の高い情報源**
   - 行政発表、学術論文、標準文書を優先
   - 一次情報源を重視

## コミットルール

- **必須**: `bash scripts/commit.sh "メッセージ"` または `git commit -m "メッセージ"`
- **禁止**: AI署名付きコミット（自動検出・拒否）

## ビルドコマンド

### Make経由でのビルド（推奨）

すべてのビルドコマンドは`make`経由で実行できます：

```bash
# ヘルプを表示
make help

# HTMLレポート生成（プレビュー用）
make build

# PDFレポート生成（配布用）
make build-pdf

# HTML/PDF両方を生成
make build-all

# 引用整合性チェック
make check

# 引用整合性チェック + URL有効性確認
make check-urls

# 開発モード（自動ビルド + 監視）
make dev

# 本番モード（完全チェック）
make prod
```

### カスタムレポートのビルド

デフォルト以外のレポートをビルドする場合：

```bash
# カスタムレポートをビルド
make build REPORT=reports/my-research.md

# 開発モードでカスタムレポート
make dev REPORT=reports/my-research.md
```

### スクリプトを直接使用する場合

```bash
# HTMLレポート生成
scripts/build-report.sh html reports/report.md

# PDFレポート生成
scripts/build-report.sh pdf reports/report.md [出力名]

# 引用整合性チェック
scripts/check-references.sh reports/report.md

# 継続的ビルド（開発モード）
scripts/continuous-build.sh --dev

# 継続的ビルド（本番モード）
scripts/continuous-build.sh --prod reports/report.md
```

### AIによる自動活用指示

調査報告書作成タスクでは、以下のワークフローを推奨します：

1. **執筆段階**: 定期的に`make check`で引用の整合性を確認
2. **中間レビュー**: `make build`でプレビュー版を生成
3. **最終確認**: `make check-urls`でオンライン資料の有効性確認
4. **配布準備**: `make build-pdf`で最終版PDF生成

### 品質チェック自動化

- 引用番号の連続性確認
- 参考文献との対応チェック
- 未使用参考文献の検出
- リンク切れの自動検出

### 開発ワークフロー

**推奨ワークフロー:**

1. **開発時**: `make dev` で継続的ビルド環境を起動
   - Markdownファイルを編集するとリアルタイムでHTML生成
   - ブラウザが自動更新
   - 引用チェックも自動実行で品質を維持

2. **レビュー時**: `make build-all` で HTML/PDF両方を生成
   - `make check-urls` でリンク切れも確認

3. **配布準備時**: `make prod` で本番品質チェック
   - ダッシュボードでビルド統計を確認

## プロジェクト固有の追加指示

### 調査時の留意事項

- 最新の情報を優先（公開日時を確認）
- 複数の情報源でクロスチェック
- 原文へのアクセス可能性を確保（URLや書誌情報）

### 執筆時の留意事項

- 専門用語は初出時に説明
- 図表には必ず説明文を付与
- 略語は初出時にフルスペルを記載

### Markdown記法の留意事項

- **強調表現の後は必ず空行を挿入**: `**太字**`や`*斜体*`の直後に箇条書きや段落を続ける場合は、間に空行を必ず入れる
- **箇条書きの前後**: 箇条書きの前後には空行を入れ、レンダリングの崩れを防ぐ
- **見出しとコンテンツの分離**: 見出し（`#`、`##`等）の後は空行を入れてから本文を開始する

#### 正しい例
```markdown
**重要なポイント**

- 項目1
- 項目2
- 項目3

次の段落が続きます。
```

#### 避けるべき例
```markdown
**重要なポイント**
- 項目1（レンダリングが崩れる可能性）
- 項目2
```

### レビュー時の留意事項

- 引用の正確性を確認
- 論理的一貫性をチェック
- 読者視点での分かりやすさを評価 